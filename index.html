<html>
<head>
<TITLE>COMS 6998-006: Foundations of Blockchains, Fall 2021</TITLE>
  <link rel="stylesheet" type="text/css" href="main.css">

</head>
<body>

<h1>COMS 6998-006: Foundations of Blockchains</h1>

<p>
<b><p class="header">Announcements</p></b>

<ul>
<!--
<li>4/3: The <a href="e/e1.pdf">first exercise set</a> has been posted.
Further exercises sets will follow on a weekly basis, posted 
under "Coursework" below
on Thursday or Friday.  (Remember these are not to be turned in.)
-->
<li>Sept 2: Welcome to COMS 6998-006!</li>
<li>Sept 15: Notes for Lecture 1 posted.
<li>Sept 15: HW1 posted.
<li>Sept 20: Lecture room changed to CSG 451 (starting with lecture 4).
<li>Sept 28: HW2 posted.
  <!--
<li>Nov 7: The final (non-cumulative) exam will be in class during the last meeting time, Monday December 9, 10:10-11:25am.
-->
</ul>

<b>Instructor:</b> 
<ul>
<li>
<A HREF="http://timroughgarden.org/">Tim
Roughgarden</A> (Office hours: Tuesdays 5-6pm by Zoom. Email: tr@cs.columbia.edu.) 
</ul>
<p>

<b>Course Assistants:</b> 
<ul>
<li>
Maryam Bahrani
(Office hours: Mondays 3-5pm by Zoom. Wednesdays 12:30-2:30pm in the CS TA room on the first floor of Mudd.)
Email: m.bahrani@columbia.edu.
<!--
<li>
Chengyu Lin
(Office hours: Tuesdays 2-3pm.
Email: chengyu@cs.columbia.edu.)
-->
</ul>

<p> <b>Time/location:</b> 8:40-9:55 AM Tue/Thu in <strike>Mudd 834</strike> CSB 451.

<p> <b>Discussion site:</b> <a href="https://edstem.org/us/courses/13815/discussion/">ed</a>.
  <!--We'll be using
<a href="https://piazza.com/class#fall2019/comsw49952">Piazza.</a>-->

<!--
<p> <b>Email address for PSet submissions:</b> 
cs261submissions@gmail.com

-->

<p> <b>Prerequisites</b>: Undergraduate algorithms (COMS 4231) or equivalent mathematical maturity.  The intended audience is first-year graduate students
  with a strong interest in and affinity for theoretical computer science.

  <!--
<p>

<b>Course description:</b>
Randomness pervades the natural processes around us, from the
formation of networks, to genetic recombination, to quantum
physics. Randomness is also a powerful tool that can be leveraged to
create algorithms and data structures which, in many cases, are more
efficient and simpler than their deterministic counterparts. This
course covers the key tools of probabilistic analysis, and
applications of these tools to understand the behaviors of random
processes and algorithms. Emphasis is on theoretical foundations,
though we will apply this theory broadly, discussing applications in
machine learning and data analysis, networking, and systems.
-->
  
<p>

  <b>Course outline</b> (subject to change):
  <ul>
    <li>Classical permissioned consensus.
      <ul>
	<li>Types of adversaries and synchrony models, Dolov-Strong Byzantine broadcast protocol, FLP impossibility result for asynchronous consensus, tight fault-tolerant bounds in the partially synchronous model.
      </ul>
    <li>Permissionless consensus.
      <ul>
	<li>Nakamoto (longest-chain) consensus, guarantees for the Bitcoin backbone protocol, committee-based reductions to BFT-type permissioned protocols, the CAP theorem.
      </ul>
    <li>Sybil-resistance.
      <ul>
	<li>Proof-of-work, difficulty adjustment, selfish mining; proof-of-stake, VRFs and VDFs, etc.
      </ul>
    <li>Bitcoin deep dive.
      <ul>
	<li>Block structure, Merkle trees, UTXOs, light clients, scaling Bitcoin via payment channels and the Lightning network.
      </ul>
    <li>Ethereum deep dive.
      <ul>
    <li>Block structure, gas and the EVM, the EIP-1559 transaction fee mechanism, scaling Ethereum via optimistic and zk-rollups, plans for ETH 2.0.
      </ul>
    <li>Newer-generation layer-1 consensus protocols (e.g., Solana and Avalanche).
    <li>The multi-chain vision: interoperability and bridges.
    <li>DeFi (decentralized finance) primitives.
      <ul>
	<li>Stablecoins, oracles.
      </ul>
    <li>DeFi applications.
      <ul>
	<li>Borrowing, lending, trading via automated market makers.
      </ul>
    <li>Miner extractable value (MEV) and interactions between the consensus and application layers.
    <li>(Time permitting) Approaches to protocol governance.
      <li>(Time permitting) A look ahead: DAOs, NFTs, Web3, etc.

      
      </ul>
  

<b>Textbook:</b> There is no required textbook for the course;
lectures are the sole required source of content.
Supplementary reading will be posted as part of the lecture schedule, below.

<p>

  <b>Lecture notes:</b> (posted only sporadically, complete set should be ready in early 2022)
  <ul>
    <li><a href="l/l1.pdf">Lecture 1</a> (Introduction and Overview) [unedited 0th draft]
      </ul>

<p>

<h3>Coursework</h3>

    <ul>
      

<!--
<li><b>Exercise Sets (0%)</b>: 
Exercise sets will be handed out weekly and are meant to help
you keep up with the course material.
Do not turn in your solutions.  Think about them and discuss with
fellow students or the course staff any that you cannot answer.
At least half of each exam will consist of 
problems on these exercise sets or variations thereof.
<ul>
<li><a href="e/e1.pdf">Week 1 Exercises</A> (Posted Wed Sept 4)
<li><a href="e/e2.pdf">Week 2 Exercises</a> (Posted Wed Sept 11)
<li><a href="e/e3.pdf">Week 3 Exercises</a> (Posted Wed Sept 18)
<li><a href="e/e4.pdf">Week 4 Exercises</a> (Posted Wed Sept 25)
<li><a href="e/e5.pdf">Week 5 Exercises</a> (Posted Wed Oct 2)
<li><a href="e/e6.pdf">Week 6 Exercises</a> (Posted Wed Oct 9)
<li><a href="e/e7.pdf">Week 7 Exercises</a> (Posted Wed Oct 16)
<li>[No exercise set on Oct 23.]
<li><a href="e/e8.pdf">Week 9 Exercises</a> (Posted Wed Oct 30)
<ul>
<li>Typo in Exercise 37 fixed 12/2/19.
  </ul>
<li>[No exercise set on Nov 6.]
<li><a href="e/e9.pdf">Week 11 Exercises</a> (Posted Wed Nov 13)
<li><a href="e/e10.pdf">Week 12 Exercises</a> (Posted Wed Nov 20)
  <ul>
    <li>Typo in Exercise 48 fixed on 12/5/19.
      </ul>
<li><a href="e/e11.pdf">Week 13-14 Exercises</a> (Posted Mon Dec 2)
</ul>

-->

<p>

<li><b>Problem Sets (60%)</b>: 
  There will be a number of problem sets, around 8-9 in total.
  Problem sets can be completed in pairs.  
<ul>
  <li><a href="hw/hw1.pdf">Homework #1</a>
<strike>(Due Thu Sept 23.)</strike>
 (Due Mon Sept 27.)
  <li><a href="hw/hw2.pdf">Homework #2</a>
(Due Thu Oct 7.)
  <li><a href="hw/hw3.pdf">Homework #3</a>
(Due Thu Oct 14.)
</ul>

<p>

<li><b>Problem Set Policies</b>: 
  <ul>
    <li>To be submitted in groups of 2 (all students of the group receive the same score).
    <li>You can form different pairs for different exercise sets.
    <li>You can discuss exercises with students from other groups verbally and at a high level only.
    <li>Except where otherwise noted, you may refer to your course notes, the
      textbooks and research papers listed on the course Web
      page <b>only</b>. You cannot refer to textbooks, handouts, or
      research papers that are not listed on the course home page. If you
      do use any approved sources, make you sure you cite them
      appropriately, and make sure that all your words are your own.
    <li>You are strongly encouraged to use LaTex to typeset your write-up.
      Here&#39;s a <a href="template.tex">LaTeX template</a> that you can use to type up solutions.
      <a href="https://www.google.com/url?q=http://en.wikibooks.org/wiki/LaTeX&amp;source=gmail-html&amp;ust=1631719240228000&amp;usg=AFQjCNEuNSY9l5DmktEemkib9jOF6hNgJA" target="_blank" rel="noreferrer">Here</a> and
      <a href="https://www.google.com/url?q=http://tobi.oetiker.ch/lshort/lshort.pdf&amp;source=gmail-html&amp;ust=1631719240228000&amp;usg=AFQjCNFkvPO2dK4cJeaIQzBPB4IPMgNMAg" target="_blank" rel="noreferrer">here</a> are good introductions to LaTeX.
    <li><b>Honor code:</b> We expect you to abide by the computer science department&#39;s
      <a href="https://www.google.com/url?q=https://www.cs.columbia.edu/education/honesty/&amp;source=gmail-html&amp;ust=1631719240228000&amp;usg=AFQjCNFF7AD5veejv_lHVVwLEvJa79SHAg" target="_blank" rel="noreferrer">policies and procedures regarding academic honesty</a>.
    <li><b>Submission instructions:</b>
      We are using Gradescope for the homework submissions. Go to
      <a href="https://www.google.com/url?q=http://www.gradescope.com&amp;source=gmail-html&amp;ust=1631719240228000&amp;usg=AFQjCNH3W_zHT4L79CO2nAePE25WgsDbwg" target="_blank" rel="noreferrer">www.gradescope.com</a> to either login or create a new
      account. Use the course code 6PN7NP to register for this class. Only one group member
      needs to submit the assignment. When submitting, please remember to
      add all group member names onto Gradescope.
</li></li></li></li></li></li></li></ul></li>

  <p>

<li><b>Late Days</b>: 
<ul>
<li>One late day equals a 24-hour extension.
<li>Each student has three free late days.
<li>At most two late days can be applied to a single assignment.
  <!--;
after Friday (following the original due date) no solutions
  will be accepted.
-->
<li>Each late day used after the first two will result in a 25%
  penalty.
<ul>
<li>Example: a student had one free late day remaining but their
  group uses two late days on a Problem Set.  If the group's write-up
  earns p points, the student receives a final score of .75*p points
  for the assignment.
</ul>

</ul>

<p>

  <li><b>Research project (40%)</b>: To be completed in teams of 3-4
students. The project can be theoretical or application-focused, and
should relate to the course content but otherwise can be on a topic of
your choosing. A single report of 15-20 pages will be due shortly
after the final lecture.

    </ul>
    
<p>


<h3>Lecture Schedule</h3>

<p>

  <ul>
    <li><b>Lecture 1 (Thu Sept 9):</b> Course overview and main themes.
      The blockchain stack and its layers.
      Ideal digital signature schemes.
      The SMR (state machine replication) problem.
      Defining consensus, consistency, and liveness.
	Supplementary reading:
<ul>
	<li><a href="l/l1.pdf">Lecture notes</a>
	  <li><a href="https://decentralizedthoughts.github.io/2019-10-15-consensus-for-state-machine-replication/">Consensus for SMR</a> (Decentralized Thoughts)
</ul>
      

<p>

    <li><b>Lecture 2 (Tue Sept 14):</b> The synchronous model and the Dolev-Strong protocol for Byzantine broadcast.
Supplementary reading:
<ul>
  <li><a href="https://decentralizedthoughts.github.io/2019-12-22-dolev-strong/">Dolev-Strong Authenticated Broadcast</a> (Decentralized Thoughts)
	<li><a href="http://www.cs.umd.edu/~jkatz/gradcrypto2/NOTES/lecture26.pdf">Lecture notes</a> from Jonathan Katz's advanced crypto course (see Section 3).
	<li>Chapters 3 and 6 of Elaine Shi's book draft, <a href="http://elaineshi.com/docs/blockchain-book.pdf">Foundations of Distributed
		     Consensus and Blockchains</a>.
  </ul>
      Historical readings:
      <ul>
	<li>L. Lamport, R. Shostak, and M. Pease, <a href="https://lamport.azurewebsites.net/pubs/byz.pdf">The Byzantine Generals Problem</a>, ACM Transactions on Programming Languages and Systems, 1982.
	<li>D. Dolev and H. R. Strong, <a href="https://www.cs.huji.ac.il/~dolev/pubs/authenticated.pdf">Authenticated Algorithms for Byzantine Agreement</a>, SIAM Journal on Computing, 1983.
	  </ul>
<p>

    <li><b>Lecture 3 (Thu Sept 16):</b> Necessity of PKI for synchronous consensus with dishonest majority.  Proof themes: simulation and indistinguishability.
	Supplementary reading:
<ul>
  <li><a href="https://decentralizedthoughts.github.io/2019-08-02-byzantine-agreement-is-impossible-for-$n-slash-leq-3-f$-is-the-adversary-can-easily-simulate/">Byzantine Agreement Is Impossible for n≤3f if the Adversary Can Simulate</a> (Decentralized Thoughts)
	<li><a href="http://www.cs.umd.edu/~jkatz/gradcrypto2/NOTES/lecture26.pdf">Lecture notes</a> from Jonathan Katz's advanced crypto course (see Section 2).
	<li>Chapter 4 of Elaine Shi's book draft, <a href="http://elaineshi.com/docs/blockchain-book.pdf">Foundations of Distributed
		     Consensus and Blockchains</a>.
  </ul>
      Historical readings:
      <ul>
	<li>M. Pease, R. Shostak, and L. Lamport, <a href="https://lamport.azurewebsites.net/pubs/reaching.pdf">Reaching Agreement in
	    the Presence of Faults</a>, Journal of the ACM, 1980.
	<li>M. J. Fischer, N. A. Lynch, and M. Merritt, <a href="https://groups.csail.mit.edu/tds/papers/Lynch/FischerLynchMerritt-dc.pdf">Easy Impossibility Proofs for Distributed Consensus Problems</a>, Distributed Computing, 1986.
      </ul>
      
	
<p>

    <li><b>Lecture 4 (Tue Sept 21):</b> The asynchronous model.  Start proof of FLP impossibility theorem.
	Supplementary reading:
<ul>
  <li><a href="https://decentralizedthoughts.github.io/2019-12-15-consensus-model-for-FLP/">Consensus Lower Bounds via Uncommitted Configurations</a> (Decentralized Thoughts)
	<li>Chapter 12 of Elaine Shi's book draft, <a href="http://elaineshi.com/docs/blockchain-book.pdf">Foundations of Distributed
		     Consensus and Blockchains</a>.
  </ul>
      Historical readings:
      <ul>
	<li>M. J. Fischer, N. A. Lynch, and M. S. Paterson, <a href="https://groups.csail.mit.edu/tds/papers/Lynch/jacm85.pdf">Impossibility of Distributed Consensus with One Faulty
	    Process</a>, Journal of the ACM, 1985.
	  <li>H. Völzer, <a href="https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.221.7907&rep=rep1&type=pdf">A Constructive Proof for FLP</a>, Information Processing Letters, 2004.
      </ul>
	
<p>

    <li><b>Lecture 5 (Thu Sept 23):</b> Finish proof of FLP impossibility theorem.  
      Supplementary reading: same as Lecture 4, and also:
      <ul>
	<li><a href="https://decentralizedthoughts.github.io/2019-12-15-asynchrony-uncommitted-lower-bound/">The FLP Impossibility, Asynchronous Consensus Lower Bound via Uncommitted Configurations</a> (Decentralized Thoughts)
	  </ul>
<p>

  <li><b>Lecture 6 (Tue Sept 28):</b>
    The partially synchronous model.  The Tendermint protocol.
	Supplementary reading:
    <ul>
      <li><a href="andy.pdf">Notes</a> by <a href="https://lewis-pye.com/">Andrew Lewis-Pye</a>.
	<li><a href="https://decentralizedthoughts.github.io/2019-06-01-2019-5-31-models/">Synchrony, Asynchrony and Partial synchrony</a> (Decentralized Thoughts)
      <li>Also related: <a href="https://decentralizedthoughts.github.io/2020-11-29-the-lock-commit-paradigm/">The Lock-Commit Paradigm</a> (Decentralized Thoughts)
<li><a href="https://docs.tendermint.com/v0.32/spec/consensus/consensus.html#">Tendermint Core</a> documentation.
    </ul>
    Historical readings:
    <ul>
      <li>C. Dwork, N. Lynch, and L. Stockmeyer, <a href="https://groups.csail.mit.edu/tds/papers/Lynch/jacm88.pdf">Consensus in the Presence of Partial Synchrony</a>, Journal of the ACM, 1988.
	<li>E. Buchman, J. Kwon, and Z. Milosevic, <a href="https://arxiv.org/abs/1807.04938">The latest gossip on BFT consensus</a>, 2018.
    </ul>
    
    
<p>

  <li><b>Lecture 7 (Thu Sept 30):</b> Properties of Tendermint.
    The CAP theorem.  Supplementary readings same as above, and also:
    <ul>
      <li><a href="https://www.the-paper-trail.org/page/cap-faq/">The CAP FAQ</a> (Paper Trail)
	</ul>
    
<p>

  <li><b>Lecture 8 (Tue Oct 5):</b>
    Longest-chain consensus.
    Supplementary reading:
    <ul>
      <li>The <a href="https://bitcoin.org/bitcoin.pdf">Bitcoin white paper</a>, 2008.
      <li>I. Abraham and D. Malkhi, <a href="https://dahliamalkhi.github.io/files/BlockchainBFT-BEATCS2017.pdf">The Blockchain Consensus Layer and BFT</a>, Bulletin of the EATCS, 2017.
      <li>J. A. Garay, A. Kiayias, and N. Leonardos,
	<a href="https://eprint.iacr.org/2014/765.pdf">The Bitcoin Backbone Protocol: Analysis and Applications</a>, EUROCRYPT, 2015.
      <li>R. Pass, L. Seeman, and a. shelat, <a href="https://eprint.iacr.org/2016/454.pdf">Analysis of the Blockchain Protocol in Asynchronous Networks</a>, EUROCRYPT, 2017.
	<li>A. Dembo, S. Kannan, E. N. Tas, D. Tse, P. Viswanath, X. Wang, and O. Zeitouni, <a href="https://arxiv.org/pdf/2005.10484.pdf">Everything is a Race and Nakamoto Always Wins</a>, CCS, 2020.
	</ul>
    <ul>
      <li>The <a href="https://bitcoin.org/bitcoin.pdf">Bitcoin white paper</a>, 2008.
</ul>
    <p>

    <li><b>Lecture 9 (Thu Oct 7):</b> The permissionless setting.  Proof-of-work sybil-resistance.  Difficulty adjustment.
    Supplementary reading:
    <ul>
      <li>The <a href="https://bitcoin.org/bitcoin.pdf">Bitcoin white paper</a>, 2008.
      <li>R. Pass and E. Shi, <a href="https://eprint.iacr.org/2018/302.pdf">Rethinking Large-Scale Consensus</a>, 2018.
      <li>A. Lewis-Pye and T. Roughgarden,
	<a href="https://arxiv.org/pdf/2101.07095.pdf">Byzantine Generals in the Permissionless Seing</a>, 2021.
</ul>
	Historical readings:
    <ul>
      <li>C. Dwork and M. Naor, <a href="https://www.wisdom.weizmann.ac.il/~naor/PAPERS/pvp.pdf">Pricing via Processing or Combatting Junk Mail</a>, CRYPTO '92.
	<li>A. Back, <a href="http://www.hashcash.org/hashcash.pdf">Hashcash - A Denial of Service Counter-Measure</a>, 2002.
<p>

    <li><b>Lecture 10 (Tue Oct 12):</b> Selfish mining. Proof-of-stake sybil resistance.
	Supplementary reading:
	
<p>

    <li><b>Lecture 11 (Thu Oct 14):</b> The economic security of blockchains.
	Supplementary reading:
	
<p>

    <li><b>Lecture 12 (Tue Oct 19):</b> Deep dive on Bitcoin (UTXOs, Merkle trees, light clients, etc.).
	Supplementary reading:
	
<p>

    <li><b>Lecture 13 (Thu Oct 21):</b> Scaling Bitcoin via payment channels and the Lightning Network.
	Supplementary reading:
	
<p>

    <li><b>Lecture 14 (Tue Oct 26):</b> Deep dive on Ethereum.
	Supplementary reading:
	
<p>

    <li><b>Lecture 15 (Thu Oct 28):</b> EIP-1559 and Ethereum's transaction fee mechanism.
	Supplementary reading:
	
<p>

<li>[no class on Tue Nov 2 --- academic holiday]
  
<p>
  
    <li><b>Lecture 16 (Thu Nov 4):</b> Scaling Ethereum I (sidechains, optimistic rollups).
	Supplementary reading:
	
<p>

    <li><b>Lecture 17 (Tue Nov 9):</b> Scaling Ethereum II (zk-rollups).
	Supplementary reading:
	
<p>

    <li><b>Lecture 18 (Thu Nov 11):</b> Layer-1 upstarts.
	Supplementary reading:
	
<p>

    <li><b>Lecture 19 (Tue Nov 16):</b> Interoperability and bridges.
	Supplementary reading:
	
<p>

    <li><b>Lecture 20 (Thu Nov 18):</b> Stablecoins.
	Supplementary reading:
	
<p>

    <li><b>Lecture 21 (Tue Nov 23):</b> Oracles.
	Supplementary reading:
	
<p>

<li>[no class on Thu Nov 25 --- academic holiday]
  
<p>
  
    <li><b>Lecture 22 (Tue Nov 30):</b> DeFi: borrowing, lending, and trading.
	Supplementary reading:
	
<p>

    <li><b>Lecture 23 (Thu Dec 2):</b> Deep dive on automated market makers.
	Supplementary reading:
	
<p>

    <li><b>Lecture 24 (Tue Dec 7):</b> Miner extractable value (MEV).
	
<p>

    <li><b>Lecture 25 (Thu Dec 9):</b> DAOs and on-chain governance.
	Supplementary reading:
	
<p>

</ul>      
